<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Lexend Giga font -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend+Giga&display=swap"
      rel="stylesheet"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="./style.css" />
    <!-- BootstrapCSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
  </head>
  <body class="color-change-2x">
    <div>
      <div
        style="display: flex; justify-content: space-between"
        class="container-fluid"
      >
        <img
          class="actionbtns"
          src="https://image.flaticon.com/icons/png/512/126/126467.png"
          height="150"
          onclick="resetLS"
        />

        <img
          class="actionbtns"
          src="http://cdn.onlinewebfonts.com/svg/img_264914.png"
          height="150"
          data-toggle="modal"
          data-target="#ModalCenter"
        />
      </div>
      <h1 onmouseover="toggleWhite()" id="h1" class="tracking-in-contract">
        WELCOME TO YOUR PERSONAL TASKS-LIST
      </h1>
    </div>
    <div class="row">
      <div class="container-fluid">
        <img
          onclick="sortLists()"
          src="https://img.icons8.com/ios/452/sort.png"
          height="50"
        />
        <input
          style="padding-left: 50px"
          type="text"
          id="to-add"
          onfocus="this.value=''"
          value="Add something to your personal task-list.."
        />

        <img
          id="addTask"
          style="margin-top: 2px"
          src="https://freeiconshop.com/wp-content/uploads/edd/plus-flat.png"
          height="45"
          onclick="addtasks()"
        />
        <input
          type="color"
          placeholder="Color"
          id="colorPicker"
          onchange="getColor()"
        />
      </div>
      <div class="container-fluid">
        <ul id="my-list"></ul>
      </div>
    </div>
    <div
      class="modal fade"
      id="ModalCenter"
      tabindex="-1"
      role="dialog"
      aria-labelledby="ModalCenterTitle"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="ModalCenterTitle">
              preview a new background
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <label>
                <input
                  class="imguploader"
                  type="text"
                  placeholder="image url here (http://image..)"
                />
              </label>
              <label>
                <img
                  src="https://icons-for-free.com/iconfiles/png/512/box+document+outline+share+top+upload+icon-1320195323221671611.png"
                  height="30"
                />
                <input class="imguploader2" type="file" style="display: none" />
              </label>
              <label>
                <img
                  onclick="imagePreview()"
                  src="https://static.thenounproject.com/png/2965875-200.png"
                  height="20" /></label
              ><label
                ><img
                  onclick="imagePrevRemove()"
                  src="https://image.flaticon.com/icons/png/512/458/458594.png"
                  height="22"
              /></label>
            </div>
          </div>
          <div class="modal-footer">
            <img
              onclick="imagePrevRemove()"
              src="https://static.thenounproject.com/png/1258168-200.png"
              height="50"
              data-dismiss="modal"
            />
            <img
              onclick="saveChanges()"
              style="margin-left: 70%"
              src="https://cdn.iconscout.com/icon/free/png-256/save-1779882-1518534.png"
              height="50"
            />
          </div>
        </div>
      </div>
    </div>
    <!-- Optional JavaScript -->
    <script>
      const d = new Date(2021, 1, 10);
      const ye = new Intl.DateTimeFormat("en", { year: "numeric" }).format(d);
      const mo = new Intl.DateTimeFormat("en", { month: "short" }).format(d);
      const da = new Intl.DateTimeFormat("en", { day: "2-digit" }).format(d);
      const title = document.querySelector("title");
      title.innerText = `${da}/${mo}/${ye}`;

      const getColor = () => {
        color = document.getElementById("colorPicker").value;
        let li = document.querySelectorAll("li");
        li.forEach((li) => {
          li.style.backgroundColor = color;
        });
      };

      const readInput = () => {
        let input = document.querySelector("input");
        console.log(input.value);
      };
      let addEventListener = () => {
        let inputField = document.getElementById("to-add");
        inputField.onkeydown = readInput;
      };
      addEventListener();
      let listItems = [];
      let listems = {};
      const addtasks = () => {
        let value = document.querySelector("input").value;
        if (value !== "") {
          let text = document.createTextNode(value);
          let ul = document.getElementById("my-list");
          let liCreate = document.createElement("li");
          let tickButton = document.createElement("img");
          tickButton.src =
            "https://cdn4.iconfinder.com/data/icons/defaulticon/icons/png/256x256/check.png";
          let deleteButton = document.createElement("img");
          deleteButton.src =
            "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/OOjs_UI_icon_trash.svg/1200px-OOjs_UI_icon_trash.svg.png";
          let divvv = document.createElement("div");

          tickButton.classList.add("completedtask");
          tickButton.addEventListener("click", () => {
            tickButton.parentNode.parentNode.style.textDecoration =
              "line-through";
          });

          deleteButton.classList.add("deltask");
          deleteButton.addEventListener("click", () => {
            deleteButton.parentNode.parentNode.remove();
          });
          divvv.appendChild(tickButton);
          divvv.appendChild(deleteButton);
          liCreate.appendChild(text);
          liCreate.appendChild(divvv);
          liCreate.classList.add("tracking-in-contract");

          ul.appendChild(liCreate);
          resetinput();
        } else {
          alert(
            "You need to write something in order to add a task to the list!"
          );
        }
      };
      const resetinput = () => {
        let inputField = document.getElementById("to-add");
        inputField.value = "";
      };
      const sortLists = () => {
        const list = document.querySelector("ul");
        [...list.children]
          .sort((a, b) => (a.innerText > b.innerText ? 1 : -1))
          .forEach((node) => list.appendChild(node));
      };

      let bodyy = document.querySelector("body");
      const saveChanges = () => {
        let image = document.querySelector(".imguploader").value;
        bodyy.classList.remove("color-change-2x");
        bodyy.style.backgroundImage = `url("${image}")`;
        bodyy.classList.add("fitImage");
      };

      const imagePreview = () => {
        let image = document.querySelector(".imguploader").value;
        bodyy.classList.remove("color-change-2x");
        bodyy.style.backgroundImage = `url("${image}")`;
        bodyy.classList.add("fitImage");
      };
      const imagePrevRemove = () => {
        bodyy.style.backgroundImage = "none";
        bodyy.classList.add("color-change-2x");
      };
      const toggleWhite = () => {
        let h1 = document.querySelector("h1").style;
        if (h1.color !== "white") {
          h1.color = "white";
        } else {
          h1.color = "#0f0e0ec7";
        }
      };
      let input = document.getElementById("to-add");
      input.onkeydown = function (e) {
        if (e.keyCode === 13) {
          addtasks();
        }
      };
    </script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
